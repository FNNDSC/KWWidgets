GET_FILENAME_COMPONENT(EXAMPLE_DIR_NAME ${CMAKE_CURRENT_SOURCE_DIR} NAME)
SET(EXAMPLE_TARGET_NAME "KW${EXAMPLE_DIR_NAME}Example")
SET(EXAMPLE_SRCS "${EXAMPLE_TARGET_NAME}.cxx")
SET(WIDGETS_DIR_NAME "Widgets")
FILE(GLOB WIDGETS_SRCS "${CMAKE_CURRENT_SOURCE_DIR}/${WIDGETS_DIR_NAME}/*.tcl")

IF(BUILD_EXAMPLES)
  INSTALL_FILES("${KWWidgets_INSTALL_DATA_DIR}/Examples/Tcl/${EXAMPLE_DIR_NAME}" .tcl ${EXAMPLE_SRCS})
  INSTALL_FILES("${KWWidgets_INSTALL_DATA_DIR}/Examples/Tcl/${EXAMPLE_DIR_NAME}/${WIDGETS_DIR_NAME}" .tcl ${WIDGETS_SRCS})
ENDIF(BUILD_EXAMPLES)

IF(BUILD_TESTING)
  IF (VTK_WRAP_TCL AND TCL_TCLSH)
    ADD_TEST(Test${EXAMPLE_TARGET_NAME}Tcl ${TCL_TCLSH} "${CMAKE_CURRENT_SOURCE_DIR}/${EXAMPLE_TARGET_NAME}.tcl" --test)
  ENDIF (VTK_WRAP_TCL AND TCL_TCLSH)
ENDIF(BUILD_TESTING)
